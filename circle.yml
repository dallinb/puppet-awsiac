---
machine:
  environment:
    AWS_REGION: eu-west-1
    FACTER_PREFIX: demo
dependencies:
  override:
    - bundle install
    - puppet module install puppetlabs-aws --version 1.4.0
    - puppet module install puppetlabs-stdlib --version 4.15.0
test:
  override:
    - rubocop -DES
    - puppet-lint --fail-on-warnings .
deployment:
  demo-apply:
    branch: demo-apply
    commands:
      - FACTER_REGION=$AWS_REGION puppet apply environment/apply.pp --test
